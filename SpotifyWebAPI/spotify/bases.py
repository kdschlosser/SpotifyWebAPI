# -*- coding: utf-8 -*-
#
# This file is part of EventGhost.
# Copyright © 2005-2016 EventGhost Project <http://www.eventghost.net/>
#
# EventGhost is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free
# Software Foundation, either version 2 of the License, or (at your option)
# any later version.
#
# EventGhost is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
# more details.
#
# You should have received a copy of the GNU General Public License along
# with EventGhost. If not, see <http://www.gnu.org/licenses/>.


ISO3166_1_ALPHA_2 = dict(
    AD='Andorra',
    AE='United Arab Emirates',
    AF='Afghanistan',
    AG='Antigua and Barbuda',
    AI='Anguilla',
    AL='Albania',
    AM='Armenia',
    AO='Angola',
    AQ='Antarctica',
    AR='Argentina',
    AS='American Samoa',
    AT='Austria',
    AU='Australia',
    AW='Aruba',
    AX='Åland Islands',
    AZ='Azerbaijan',
    BA='Bosnia and Herzegovina',
    BB='Barbados',
    BD='Bangladesh',
    BE='Belgium',
    BF='Burkina Faso',
    BG='Bulgaria',
    BH='Bahrain',
    BI='Burundi',
    BJ='Benin',
    BL='Saint Barthelemy',
    BM='Bermuda',
    BN='Brunei Darussalam',
    BO='Bolivia, Plurinational State of',
    BQ='Bonaire, Sint Eustatius and Saba',
    BR='Brazil',
    BS='Bahamas',
    BT='Bhutan',
    BV='Bouvet Island',
    BW='Botswana',
    BY='Belarus',
    BZ='Belize',
    CA='Canada',
    CC='Cocos (Keeling) Islands',
    CD='Congo, the Democratic Republic of the',
    CF='Central African Republic',
    CG='Congo',
    CH='Switzerland',
    CI='Côte d\'Ivoire',
    CK='Cook Islands',
    CL='Chile',
    CM='Cameroon',
    CN='China',
    CO='Colombia',
    CR='Costa Rica',
    CU='Cuba',
    CV='Cabo Verde',
    CW='Curacao',
    CX='Christmas Island',
    CY='Cyprus',
    CZ='Czechia',
    DE='Germany',
    DJ='Djibouti',
    DK='Denmark',
    DM='Dominica',
    DO='Dominican Republic',
    DZ='Algeria',
    EC='Ecuador',
    EE='Estonia',
    EG='Egypt',
    EH='Western Sahara',
    ER='Eritrea',
    ES='Spain',
    ET='Ethiopia',
    FI='Finland',
    FJ='Fiji',
    FK='Falkland Islands (Malvinas)',
    FM='Micronesia, Federated States of',
    FO='Faroe Islands',
    FR='France',
    GA='Gabon',
    GB='United Kingdom',
    GD='Grenada',
    GE='Georgia',
    GF='French Guiana',
    GG='Guernsey',
    GH='Ghana',
    GI='Gibraltar',
    GL='Greenland',
    GM='Gambia',
    GN='Guinea',
    GP='Guadeloupe',
    GQ='Equatorial Guinea',
    GR='Greece',
    GS='South Georgia and the South Sandwich Islands',
    GT='Guatemala',
    GU='Guam',
    GW='Guinea-Bissau',
    GY='Guyana',
    HK='Hong Kong',
    HM='Heard Island and McDonald Islands',
    HN='Honduras',
    HR='Croatia',
    HT='Haiti',
    HU='Hungary',
    ID='Indonesia',
    IE='Ireland',
    IL='Israel',
    IM='Isle of Man',
    IN='India',
    IO='British Indian Ocean Territory',
    IQ='Iraq',
    IR='Iran, Islamic Republic of',
    IS='Iceland',
    IT='Italy',
    JE='Jersey',
    JM='Jamaica',
    JO='Jordan',
    JP='Japan',
    KE='Kenya',
    KG='Kyrgyzstan',
    KH='Cambodia',
    KI='Kiribati',
    KM='Comoros',
    KN='Saint Kitts and Nevis',
    KP='Korea, The Democratic People\'s Republic of',
    KR='Korea, The Republic of',
    KW='Kuwait',
    KY='Cayman Islands',
    KZ='Kazakhstan',
    LA='Lao People\'s Democratic Republic',
    LB='Lebanon',
    LC='Saint Lucia',
    LI='Liechtenstein',
    LK='Sri Lanka',
    LR='Liberia',
    LS='Lesotho',
    LT='Lithuania',
    LU='Luxembourg',
    LV='Latvia',
    LY='Libya',
    MA='Morocco',
    MC='Monaco',
    MD='Moldova, Republic of',
    ME='Montenegro',
    MF='Saint Martin (French part)',
    MG='Madagascar',
    MH='Marshall Islands',
    MK='Macedonia, the former Yugoslav Republic of',
    ML='Mali',
    MM='Myanmar',
    MN='Mongolia',
    MO='Macao',
    MP='Northern Mariana Islands',
    MQ='Martinique',
    MR='Mauritania',
    MS='Montserrat',
    MT='Malta',
    MU='Mauritius',
    MV='Maldives',
    MW='Malawi',
    MX='Mexico',
    MY='Malaysia',
    MZ='Mozambique',
    NA='Namibia',
    NC='New Caledonia',
    NE='Niger',
    NF='Norfolk Island',
    NG='Nigeria',
    NI='Nicaragua',
    NL='Netherlands',
    NO='Norway',
    NP='Nepal',
    NR='Nauru',
    NU='Niue',
    NZ='New Zealand',
    OM='Oman',
    PA='Panama',
    PE='Peru',
    PF='French Polynesia',
    PG='Papua New Guinea',
    PH='Philippines',
    PK='Pakistan',
    PL='Poland',
    PM='Saint Pierre and Miquelon',
    PN='Pitcairn',
    PR='Puerto Rico',
    PS='Palestine, State of',
    PT='Portugal',
    PW='Palau',
    PY='Paraguay',
    QA='Qatar',
    RE='Reunion',
    RO='Romania',
    RS='Serbia',
    RU='Russian Federation',
    RW='Rwanda',
    SA='Saudi Arabia',
    SB='Solomon Islands',
    SC='Seychelles',
    SD='Sudan',
    SE='Sweden',
    SG='Singapore',
    SH='Saint Helena, Ascension and Tristan da Cunha',
    SI='Slovenia',
    SJ='Svalbard and Jan Mayen',
    SK='Slovakia',
    SL='Sierra Leone',
    SM='San Marino',
    SN='Senegal',
    SO='Somalia',
    SR='Suriname',
    SS='South Sudan',
    ST='Sao Tome and Principe',
    SV='El Salvador',
    SX='Saint Martin (Dutch part)',
    SY='Syrian Arab Republic',
    SZ='Swaziland',
    TC='Turks and Caicos Islands',
    TD='Chad',
    TF='French Southern Territories',
    TG='Togo',
    TH='Thailand',
    TJ='Tajikistan',
    TK='Tokelau',
    TL='Timor-Leste',
    TM='Turkmenistan',
    TN='Tunisia',
    TO='Tonga',
    TR='Turkey',
    TT='Trinidad and Tobago',
    TV='Tuvalu',
    TW='Taiwan, Province of China',
    TZ='Tanzania, United Republic of',
    UA='Ukraine',
    UG='Uganda',
    UM='United States Minor Outlying Islands',
    US='United States',
    UY='Uruguay',
    UZ='Uzbekistan',
    VA='Vatican City State',
    VC='Saint Vincent and the Grenadines',
    VE='Venezuela, Bolivarian Republic of',
    VG='Virgin Islands, British',
    VI='Virgin Islands, U.S.',
    VN='Vietnam',
    VU='Vanuatu',
    WF='Wallis and Futuna',
    WS='Samoa',
    YE='Yemen',
    YT='Mayotte',
    ZA='South Africa',
    ZM='Zambia',
    ZW='Zimbabwe',
)


class ArtistsBase(object):
    _artists = None
    _artist_list =[]

    def __init__(self, artists):
        self._artist_list = artists

    @property
    def artists(self):

        if self._artists is None and self._artist_list:
            self._artists = list(Artist(**artist) for artist in self._artist_list)

        if self._artists is None:
            return []

        return self._artists


class IconBase(object):
    _icons = None
    _icon_list = []

    def __init__(self, icons):
        self._icon_list = icons

    @property
    def icons(self):
        if self._icons is None and self._icon_list:
            self._icons = list(Image(**icon) for icon in self._icon_list)

        if self._icons is None:
            return []

        return self._icons


class ImageBase(object):
    _images = None
    _image_list = []

    def __init__(self, images):
            self._image_list = images

    @property
    def images(self):

        if self._images is None and self._image_list:
            self._images = list(Image(**image) for image in self._image_list)

        if self._images is None:
            return []

        return self._images


class ExternalURLBase(object):
    _external_urls = None

    def __init__(self, external_urls):
        self._external_urls = external_urls

    @property
    def external_urls(self):
        if self._external_urls and isinstance(self._external_urls, dict):
            self._external_urls = ExternalURL(**self._external_urls)
        return self._external_urls


class ExternalIDBase(object):
    _external_ids = None

    def __init__(self, external_ids):
        self._external_ids = external_ids

    @property
    def external_ids(self):
        if self._external_ids and isinstance(self._external_ids, dict):
            self._external_ids = ExternalID(**self._external_ids)
        return self._external_ids


class FollowersBase(object):
    _followers = None

    def __init__(self, followers):
        self._followers = followers

    @property
    def followers(self):
        if self._followers and isinstance(self._followers, dict):
            self._followers = Followers(**self._followers)
        return self._followers


class CopyrightBase(object):
    _copyrights = None
    _copyright_list = []

    def __init__(self, copyrights):
        self._copyright_list = copyrights

    @property
    def copyrights(self):
        if self._copyrights is None and self._copyright_list:
            self._copyrights = list(
                Copyright(**copyright) for copyright in self._copyright_list
            )

        if self._copyrights is None:
            return []

        return self._copyrights


class TrackListBase(object):
    _tracks = None

    def __init__(self, tracks):
        self._tracks = tracks

    @property
    def tracks(self):
        if self._tracks and isinstance(self._tracks, dict):
            self._tracks = Paging(Track, **self._tracks)

        return self._tracks.items


class AvailableMarketBase(object):
    _available_markets = []

    def __init__(self, owner):
        self._owner = owner

    @property
    def available_markets(self):
        return list(
            ISO3166_1_ALPHA_2[code] for code in self._available_markets
        )


class OwnerBase(object):
    _owner = None

    def __init__(self, owner):
        self._owner = owner

    @property
    def owner(self):
        if self._owner and isinstance(self._owner, dict):
            self._owner = User(**self._owner)
        return self._owner


class AddedByBase(object):
    _added_by = None

    def __init__(self, added_by):
        self._added_by = added_by

    @property
    def added_by(self):
        if self._added_by and isinstance(self._added_by, dict):
            self._added_by = User(**self._added_by)
        return self._added_by


class Album(ArtistsBase, ImageBase, ExternalURLBase, ExternalIDBase,
    TrackListBase, CopyrightBase, AvailableMarketBase):
    album_type = ''
    genres = []
    href = ''
    id = ''
    label = ''
    name = ''
    popularity = 0
    release_date = ''
    release_date_precision = ''
    type = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        ExternalIDBase.__init__(self, kwargs.pop('external_ids'))
        ImageBase.__init__(self, kwargs.pop('images'))
        AvailableMarketBase.__init__(self, kwargs.pop('available_markets'))
        CopyrightBase.__init__(self, kwargs.pop('copyrights'))
        ArtistsBase.__init__(self, kwargs.pop('artists'))
        TrackListBase.__init__(self, kwargs.pop('tracks'))
        self.__dict__.update(kwargs)


class Artist(ImageBase, ExternalURLBase, FollowersBase):
    genres = []
    href = ''
    id = ''
    name = ''
    popularity = 0
    type = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        FollowersBase.__init__(self, kwargs.pop('followers'))
        ImageBase.__init__(self, kwargs.pop('images'))
        self.__dict__.update(kwargs)


class AudioFeature(object):
    acousticness = 0.0
    analysis_url = ''
    danceability = 0.0
    duration_ms = 0
    energy = 0.0
    id = ''
    instrumentalness = 0.0
    key = 0
    liveness = 0.0
    loudness = -60.0
    mode = 0
    speechiness = 0.0
    tempo = 0.0
    time_signature = 0
    track_href = ''
    type = ''
    uri = ''
    valence = 0.0

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class Category(IconBase):
    href = ''
    id = ''
    name = ''

    def __init__(self, **kwargs):
        IconBase.__init__(self, kwargs.pop('icons'))
        self.__dict__.update(kwargs)


class Copyright(object):
    text = ''
    type = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class Cursor(object):
    after = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class Error(object):
    status = 0
    message = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class ExternalID(object):
    type = ''
    id = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class ExternalURL(object):
    name = ''
    href = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class Followers(object):
    href = ''
    total = 0

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class Image(object):
    height = 0
    width = 0
    url = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class CursorBasedPaging(object):
    href = ''
    _items = []
    limit = 0
    next = None
    total = 0

    def __init__(self, item_cls, **kwargs):
        self._item_cls = item_cls
        self.__dict__.update(kwargs)

    @property
    def items(self):
        if self._items and isinstance(self._items[0], dict):
            self._items = list(self._item_cls(**item) for item in  self._items)
        return self._items


class Paging(CursorBasedPaging):
    offset = 0
    previous = None
    _item_cls = None

    def __init__(self, item_cls, offset, previous, **kwargs):
        self.offset = offset
        self.previous = previous
        CursorBasedPaging.__init__(self, item_cls=item_cls, **kwargs)


class Playlist(ExternalURLBase, FollowersBase,
    ImageBase, TrackListBase, OwnerBase):
    collaborative = False
    description = None
    href = ''
    id = ''
    name = ''
    public = None
    snapshot_id = ''
    type = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        FollowersBase.__init__(self, kwargs.pop('followers'))
        ImageBase.__init__(self, kwargs.pop('images'))
        TrackListBase.__init__(self, kwargs.pop('tracks'))
        OwnerBase.__init__(self, kwargs.pop('owner'))
        self.__dict__.update(kwargs)


class PlaylistTrack(AddedByBase):
    added_at = 0
    is_local = False
    track = None

    def __init__(self, track, **kwargs):
        AddedByBase.__init__(self, kwargs.pop('added_by'))
        self.track = Track(**track)
        self.__dict__.update(kwargs)


class Recommendations (object):
    seeds = []
    tracks = []

    def __init__(self, seeds, tracks):
        self.tracks = list(Track(**track) for track in tracks)
        self.seeds = list(RecommendationsSeed(**seed) for seed in seeds)


class RecommendationsSeed(object):
    afterFilteringSize = 0
    afterRelinkingSize = 0
    href = None
    id = ''
    initialPoolSize = 0
    type = ''

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)


class SavedAlbum(object):
    added_at = 0
    track = None

    def __init__(self, track, **kwargs):
        self.track = Track(**track)
        self.__dict__.update(kwargs)


class Track(ArtistsBase, AvailableMarketBase, ExternalIDBase, ExternalURLBase):
    album = None
    disc_number = 0
    duration_ms = 0
    explicit = False
    href = ''
    id = ''
    is_playable = False
    linked_from = None
    name = ''
    popularity = 0
    preview_url = None
    track_number = 0
    type = ''
    uri = ''

    def __init__(self, album, linked_from, **kwargs):
        self.album = Album(**album)
        self.linked_from = TrackLink(**linked_from)
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        ExternalIDBase.__init__(self, kwargs.pop('external_ids'))
        AvailableMarketBase.__init__(self, kwargs.pop('available_markets'))
        ArtistsBase.__init__(self, kwargs.pop('artists'))
        self.__dict__.update(kwargs)


class TrackLink(ExternalURLBase):
    href = ''
    id = ''
    type = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        self.__dict__.update(kwargs)


class User(ExternalURLBase, FollowersBase, ImageBase):
    birthdate = ''
    country = ''
    display_name = None
    email = ''
    href = ''
    id = ''
    product = ''
    type = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        FollowersBase.__init__(self, kwargs.pop('followers'))
        ImageBase.__init__(self, kwargs.pop('images'))
        self.__dict__.update(kwargs)


class PlayHistory(object):
    track = None
    played_at = 0
    context = None

    def __init__(self, track, context, **kwargs):
        self.track = Track(**track)
        self.context = Context(**context)
        self.__dict__.update(kwargs)


class Context(ExternalURLBase):
    type = ''
    href = ''
    uri = ''

    def __init__(self, **kwargs):
        ExternalURLBase.__init__(self, kwargs.pop('external_urls'))
        self.__dict__.update(kwargs)

